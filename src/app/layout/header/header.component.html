<header class="header" [class.header--scrolled]="isScrolled()">
  <nav class="header__nav container">
    <!-- Logo -->
    <a href="#" class="header__logo" aria-label="Ir al inicio">
      <span class="header__logo-bracket">[</span>
      {{ personalInfo.initials }}
      <span class="header__logo-bracket">]</span>
    </a>

    <!-- Desktop Navigation -->
    <ul class="header__links">
      @for (link of navLinks; track link.href) {
        <li>
          <a [href]="link.href" class="header__link">
            {{ link.translationKey | translate }}
          </a>
        </li>
      }
    </ul>

    <!-- Actions -->
    <div class="header__actions">
      <div class="header__desktop-controls">
        <app-language-switcher />
        <app-theme-toggle />
      </div>

      <!-- Mobile Menu Button -->
      <button
        class="header__menu-btn"
        (click)="toggleMobileMenu()"
        [attr.aria-expanded]="isMobileMenuOpen()"
        [attr.aria-controls]="'bottom-sheet'"
        [attr.aria-label]="isMobileMenuOpen() ? 'Cerrar menú' : 'Abrir menú'"
      >
        <app-icon [name]="isMobileMenuOpen() ? 'close' : 'menu'" [size]="24" aria-hidden="true" />
      </button>
    </div>
  </nav>
</header>

<!-- Bottom Sheet Overlay -->
@if (isMobileMenuOpen()) {
  <div
    class="bottom-sheet-overlay"
    @fadeIn
    (click)="closeMobileMenu()"
    aria-hidden="true"
  ></div>
}

<!-- Bottom Sheet Menu -->
@if (isMobileMenuOpen()) {
  <div
    id="bottom-sheet"
    class="bottom-sheet"
    @slideUp
    role="dialog"
    aria-label="Menú de navegación"
    cdkTrapFocus
    [cdkTrapFocusAutoCapture]="true"
    (touchstart)="onTouchStart($event)"
    (touchmove)="onTouchMove($event)"
    (touchend)="onTouchEnd()"
  >
    <div class="bottom-sheet__handle" aria-hidden="true">════</div>

    <nav class="bottom-sheet__nav">
      @for (link of navLinks; track link.href) {
        <a
          [href]="link.href"
          class="bottom-sheet__link"
          (click)="closeMobileMenu()"
        >
          <span class="bottom-sheet__link-indicator">></span>
          {{ link.translationKey | translate }}
        </a>
      }
    </nav>

    <div class="bottom-sheet__actions">
      <app-theme-toggle />
      <app-language-switcher />
    </div>
  </div>
}
